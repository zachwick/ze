<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ze: ze</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ze
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ze </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_docs_2index"></a> ze - zach's extensible text editor</p>
<p>ze is a simple text editor that uses GNU Guile as its extension language. It supports running guile code as pre- and post- hooks upon opening a file, opening a directory, or saving a file. It supports highlighting for C, Python, Ruby, PHP, Rust, APL, and Swift.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Installation</h1>
<p>First, you must install GNU Guile (and its related libraries) on your system. You can follow the <a href="https://www.gnu.org/software/guile/download/">official installation instructions</a> or by simply doing</p>
<div class="fragment"><div class="line">brew install guile</div>
</div><!-- fragment --><p>if you are using macOS.</p>
<p>Next, you must clone the repo. This is usually done by something like</p>
<div class="fragment"><div class="line">git clone git@github.com:zachwick/ze</div>
</div><!-- fragment --><p>Once you have a local clone of the repo, you must edit the path supplied to <code>scm_c_primitive_load</code> in the <code>main</code> method to match wherever your local <code>zerc.scm</code> configuration file is located. A common practice is to copy the example configuration file from the repo into a <code>.ze</code> directory in your home directory. You can do this by the following:</p>
<div class="fragment"><div class="line">mkdir ~/.ze</div>
<div class="line">cp path/to/local/clone/zerc.scm ~/.ze/</div>
</div><!-- fragment --><p>You should also copy the example file templates into this newly created <code>~/.ze</code> directory, and ensure that the paths for those templates in your <code>zerc.scm</code> match wherever you put the template files.</p>
<div class="fragment"><div class="line">cp -R templates ~/.ze/templates</div>
</div><!-- fragment --><p>Finally, simply invoke <code>make install</code> to build ze and put the resulting binary in your PATH.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
CLI Usage</h1>
<p>Use <code>ze</code> to start ze, or use <code>ze &lt;filename&gt;</code> to start ze and open <code>filename</code> all at once.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Documentation</h2>
<ul>
<li><a href="modules.html">Modules</a></li>
<li><a href="files.html">Files</a></li>
<li><a href="annotated.html">Classes</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Default Keybindings</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">chord   </th><th class="markdownTableHeadNone">name   </th><th class="markdownTableHeadNone">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CTRL-o   </td><td class="markdownTableBodyNone">open path   </td><td class="markdownTableBodyNone">Prompts the user for a path to open in ze.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CTRL-w   </td><td class="markdownTableBodyNone">write to file   </td><td class="markdownTableBodyNone">Write/Save the current buffer to a file. If the buffer does not have a filepath associated with it, the user will be prompted for a save location.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CTRL-t   </td><td class="markdownTableBodyNone">clone a template   </td><td class="markdownTableBodyNone">Prompts the user for a template to clone into the current buffer.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CTRL-s   </td><td class="markdownTableBodyNone">forward search   </td><td class="markdownTableBodyNone">Prompt the user for a string to search forward in the document for. While searching, CTRL-n moves to the next match and CTRL-b moves to the previous match. ESC quits searching and returns the cursor to the original position prior to beginning searching. ENTER quits searching and leaves the cursor at the current match.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CTRL-i   </td><td class="markdownTableBodyNone">insert timestamp   </td><td class="markdownTableBodyNone">Inserts the current timestamp at the cursor, using the format string "%Y-%m-%d %H:%M:%S" (which yields a timestamp such as "YYYY-MM-DD HH:MM:SS")    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CTRL-d   </td><td class="markdownTableBodyNone">delete line   </td><td class="markdownTableBodyNone">Deletes the entire line that the cursor is currently on.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CTRL-k   </td><td class="markdownTableBodyNone">delete rest of line   </td><td class="markdownTableBodyNone">Deletes the line from the cursor's current position to the end of the current line.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CTRL-h   </td><td class="markdownTableBodyNone">delete character   </td><td class="markdownTableBodyNone">Deletes the character at the cursor's position.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CTRL-x   </td><td class="markdownTableBodyNone">open REPL   </td><td class="markdownTableBodyNone">Opens a Guile Scheme REPL   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5"></a>
Moving the cursor</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">chord   </th><th class="markdownTableHeadNone">name   </th><th class="markdownTableHeadNone">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CTRL-p   </td><td class="markdownTableBodyNone">move cursor up   </td><td class="markdownTableBodyNone">Moves the cursor up one line and either in the same column or the right-most column if the previous line does not contain a character in the original column.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CTRL-n   </td><td class="markdownTableBodyNone">move cursor down   </td><td class="markdownTableBodyNone">Moves the cursor down one line and either in the same column or the right-most column if the previous line does not contain a character in the original column.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CTRL-f   </td><td class="markdownTableBodyNone">move cursor forward   </td><td class="markdownTableBodyNone">Moves the cursor one column to the left.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CTRL-b   </td><td class="markdownTableBodyNone">move cursor backward   </td><td class="markdownTableBodyNone">Moves the cursor one column to the right.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CTRL-v   </td><td class="markdownTableBodyNone">move page down   </td><td class="markdownTableBodyNone">Moves the cursor to the beginning of the next page of content.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CTRL-g   </td><td class="markdownTableBodyNone">move page up   </td><td class="markdownTableBodyNone">Moves the cursor to the beginning of the previous page of content.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md6"></a>
Advanced Usage</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
Plugin System</h2>
<p>ze supports Guile Scheme plugins that are automatically loaded at startup.</p>
<ul>
<li><b>Location</b>: Place <code>.scm</code> files in <code>~/.ze/plugins</code>. All non-hidden <code>.scm</code> files in that directory are loaded when ze starts.</li>
<li><b>Examples</b>: <code>make install</code> will create <code>~/.ze/plugins</code> and copy the example plugins from this repo into it.</li>
<li><b>Key bindings</b>: Use <code>(bind-key key-spec procedure)</code> to bind keys from Scheme.<ul>
<li>Key specs can be a single character (e.g., <code>"y"</code>) or a Control chord like <code>"C-y"</code>.</li>
<li>Plugin key bindings are checked before built-in handlers. If a plugin handles a key, ze skips the built-in action for that keypress.</li>
</ul>
</li>
<li><b>Inline Scheme prompt (REPL)</b>: Press <code>CTRL-x</code> to open a one-line Scheme prompt (<code>scheme@(guile-user)&gt;</code>) and evaluate expressions in the current editor environment.</li>
</ul>
<p>Minimal plugin example (<code>~/.ze/plugins/hello.scm</code>):</p>
<div class="fragment"><div class="line">(display &quot;ze: loaded plugin hello.scm&quot;) (newline)</div>
<div class="line"> </div>
<div class="line">(define (ze-hello)</div>
<div class="line">  (set-editor-status &quot;Hello from ze plugin!&quot;))</div>
<div class="line"> </div>
<div class="line">(bind-key &quot;C-y&quot; ze-hello)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md8"></a>
Example Plugins</h3>
<ul>
<li><b>hello.scm</b> (<code>C-y</code>): Sets a friendly status message to demonstrate key binding.</li>
<li><b>format.scm</b> (<code>C-l</code>): Trims trailing whitespace from all lines in the buffer and reports how many lines changed.</li>
<li><b>go-to-line.scm</b> (<code>C-g</code>): Prompts for a line number and moves the cursor there, refreshing the screen.</li>
<li><b>file-header.scm</b> (<code>C-,</code>): Inserts a simple 3-line header at the top with file name and detected type; moves cursor below header.</li>
<li><b>save-and-format.scm</b> (hook): Implements <code>postSaveHook</code> to trim trailing whitespace after saving; if changes were made it re-saves and refreshes the screen, returning a summary string.</li>
</ul>
<p>You can remove or modify these by editing/deleting the corresponding files under <code>~/.ze/plugins</code>.</p>
<h3><a class="anchor" id="autotoc_md9"></a>
Guile Hooks</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">guile function   </th><th class="markdownTableHeadNone">returns   </th><th class="markdownTableHeadNone">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">preSaveHook   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">called prior to writing buffer to file.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">postSaveHook   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">called after writing buffer to file.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">preDirOpenHook   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">called prior to opening a directory in ze.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">postDirOpenHook   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">called after opening a directory in ze.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">preFileOpenHook   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">called prior to opening a file into a buffer.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">postFileOpenHook   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">called after opening a file into a buffer.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md10"></a>
Scheme API (bindings)</h3>
<p>The following Scheme procedures are available to plugins. Return values are noted where relevant.</p>
<ul>
<li><b>Status and key bindings</b><ul>
<li><code>set-editor-status(string)</code> — set the status line message.</li>
<li><code>bind-key(key-spec, procedure)</code> — bind a key to a Scheme procedure (e.g., <code>"C-y"</code>, <code>"g"</code>).</li>
<li><code>unbind-key(key-spec)</code> — remove a key binding.</li>
<li><code>list-bindings()</code> — returns a list of <code>(key . procedure)</code> pairs.</li>
</ul>
</li>
<li><b>Buffer content</b><ul>
<li><code>buffer-&gt;string()</code> → string of the entire buffer.</li>
<li><code>buffer-line-count()</code> → number of lines.</li>
<li><code>get-line(index)</code> → string at <code>index</code> (0-based) or <code>#f</code> if out of range.</li>
<li><code>set-line!(index, string)</code> — replace contents of line at <code>index</code>.</li>
<li><code>insert-line!(index, string)</code> — insert a new line at <code>index</code>.</li>
<li><code>append-line!(string)</code> — append a new line to the end of the buffer.</li>
<li><code>delete-line!(index)</code> — delete the line at <code>index</code>.</li>
<li><code>insert-text!(string)</code> — insert text at the cursor (handles <code>\n</code>).</li>
<li><code>insert-char!(char|string)</code> — insert a single character at the cursor.</li>
<li><code>insert-newline!()</code> — insert a newline at the cursor.</li>
<li><code>delete-char!()</code> — delete the character at the cursor.</li>
</ul>
</li>
<li><b>Cursor and viewport</b><ul>
<li><code>get-cursor()</code> → pair <code>(x y)</code> of cursor column and line (0-based).</li>
<li><code>set-cursor!(x, y)</code> — move cursor to column <code>x</code>, line <code>y</code> (clamped to buffer bounds).</li>
<li><code>move-cursor!(direction)</code> — move one step; <code>direction</code> is one of <code>"left"|"right"|"up"|"down"</code>.</li>
<li><code>screen-size()</code> → pair <code>(rows cols)</code> of the current screen.</li>
<li><code>refresh-screen!()</code> — force a screen refresh.</li>
</ul>
</li>
<li><b>File I/O and filenames</b><ul>
<li><code>open-file!(path)</code> — open file into the current buffer.</li>
<li><code>save-file!()</code> — save current buffer to disk.</li>
<li><code>get-filename()</code> → current filename string or <code>#f</code> if unsaved.</li>
<li><code>set-filename!(path)</code> — set (or change) the current buffer filename and select syntax.</li>
<li><code>prompt(message)</code> → read a line of input from the user or <code>#f</code> if cancelled.</li>
</ul>
</li>
<li><b>Search</b><ul>
<li><code>search-forward!(query)</code> → pair <code>(y x)</code> of the next match location or <code>#f</code> if none.</li>
</ul>
</li>
<li><b>Syntax highlighting</b><ul>
<li><code>select-syntax-for-filename!(path)</code> — set syntax by pretending the buffer is named <code>path</code>.</li>
<li><code>get-filetype()</code> → current filetype string or <code>#f</code>.</li>
</ul>
</li>
<li><b>Dirty state</b><ul>
<li><code>buffer-dirty?()</code> → <code>#t</code> if the buffer has unsaved changes.</li>
<li><code>set-buffer-dirty!(boolean)</code> — mark buffer as dirty/clean.</li>
</ul>
</li>
<li><b>Templates</b><ul>
<li><code>clone-template!()</code> — invoke the template cloning prompt.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
Templates</h2>
<p>To add a new template, you must make changes in three places in <code>ze.c</code> and one place in your <code>zerc.scm</code> configuration file.</p>
<p>First, in <code>ze.c</code>, you must define a global variable of type <code>char*</code> that is initialized to an empty string. This variable should probably have a name like "my_new_template" or something similarly self-documenting. If we're adding an email template for instance, I'd add the following around line 90 in <code>ze.c</code> (where <code>notes_template</code> and <code>readme_template</code> are defined)</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span>* email_template = <span class="stringliteral">&quot;&quot;</span>;</div>
</div><!-- fragment --><p>Next, you must also add your new template as an option in the <code>editorCloneTemplate</code> method in <code>ze.c</code>. You should do this by adding your new template as an option in the prompt, and by adding a new "else if" block to the large if/elseif/else block in that method. Continuing the example of adding an email template, I'd replace the line around line 871 that currently reads</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> *<span class="keyword">template</span> = <a class="code hl_function" href="group__input.html#ga4de965d803aea82e894820b40e0ed097">editorPrompt</a>(<span class="stringliteral">&quot;Select Template: (N)otes | (R)eadme &quot;</span>, NULL);</div>
<div class="ttc" id="agroup__input_html_ga4de965d803aea82e894820b40e0ed097"><div class="ttname"><a href="group__input.html#ga4de965d803aea82e894820b40e0ed097">editorPrompt</a></div><div class="ttdeci">char * editorPrompt(char *prompt, void(*callback)(char *, int))</div><div class="ttdoc">Prompt the user for input with a live callback.</div><div class="ttdef"><b>Definition</b> input.c:38</div></div>
</div><!-- fragment --><p> with a new prompt that includes the new email template:</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> *<span class="keyword">template</span> = <a class="code hl_function" href="group__input.html#ga4de965d803aea82e894820b40e0ed097">editorPrompt</a>(<span class="stringliteral">&quot;Select Template: (N)otes | (R)eadme | (E)mail&quot;</span>, NULL);</div>
</div><!-- fragment --><p>The "else if" block that needs to be added after the last "else if" but before the final "else" block would then look like the following:</p>
<div class="fragment"><div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(<span class="keyword">template</span>, <span class="stringliteral">&quot;e&quot;</span>) == 0) {</div>
<div class="line">   <a class="code hl_function" href="group__status.html#ga507fc962f80d3c43c23718965348520e">editorSetStatusMessage</a>(<span class="stringliteral">&quot;Load Email template&quot;</span>);</div>
<div class="line">   templateFile = fopen(email_template, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"> }</div>
<div class="ttc" id="agroup__status_html_ga507fc962f80d3c43c23718965348520e"><div class="ttname"><a href="group__status.html#ga507fc962f80d3c43c23718965348520e">editorSetStatusMessage</a></div><div class="ttdeci">void editorSetStatusMessage(const char *fmt,...)</div><div class="ttdoc">Set the transient status message using printf-style formatting.</div><div class="ttdef"><b>Definition</b> status.c:28</div></div>
</div><!-- fragment --><p>Note that <code>email_template</code> here should match whatever you named your global varible in the first step.</p>
<p>The actual filepath to your new template file is defined in your <code>zerc.scm</code> configuration file. You'll need to define a Guile variable that is a string of the path of your template file. To do this, you need to add a line like the following to your <code>zerc.scm</code> file and ensure that the stringified path is correct.</p>
<div class="fragment"><div class="line">(define email_template &#39;&quot;/Users/zwick/.ze/templates/email&quot;)</div>
</div><!-- fragment --><p>Finally, the last edit to make will be in the <code>main</code> method defined in <code>ze.c</code>. You'll need to write the three lines of C code that read in the Guile variable that you defined in your <code>zerc.scm</code> configuration file which contains the filepath of your new template. To do this, you'll first need to define a new variable of type <code>SCM</code> to hold the Guile variable read from your <code>zerc.scm</code> configuration file.</p>
<div class="fragment"><div class="line">SCM email_template_scm;</div>
</div><!-- fragment --><p>You'll then need to write the two lines of C code that can read the Guile code and convert it into the correct C type.</p>
<div class="fragment"><div class="line">email_template_scm = scm_variable_ref(scm_c_lookup(<span class="stringliteral">&quot;email_template&quot;</span>));</div>
<div class="line">email_template = scm_to_locale_string(email_template_scm);  </div>
</div><!-- fragment --><p>After you've made these four changes, you can simply invoke <code>make install</code> to build and install your new version of ze that contains your new template.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
License</h1>
<p>ze is copyright 2018, 2019, 2020, 2025 zach wick <a href="#" onclick="location.href='mai'+'lto:'+'zac'+'h@'+'zac'+'hw'+'ick'+'.c'+'om'; return false;">zach@<span class="obfuscator">.nosp@m.</span>zach<span class="obfuscator">.nosp@m.</span>wick.<span class="obfuscator">.nosp@m.</span>com</a> and is licensed under the GNU GPLv3 or later. You can find a copy of the GNU GPLv3 included in the project as the file named <a href="https://github.com/zachwick/genie/blob/master/LICENSE">License</a>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
